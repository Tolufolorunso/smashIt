<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>smashIt | WeatherApp</title>
    <meta name="description" content="This is smash site">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- font awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css"
        integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous" />
    <!--Import Google Icon Font-->
    <link
        href="https://fonts.googleapis.com/css2?family=Lato:ital@0;1&family=Merriweather:ital,wght@0,400;0,700;1,700&display=swap"
        rel="stylesheet">

    <script src='https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.css' rel='stylesheet' />
    <!-- Custom css -->
    <link rel="stylesheet" href="/styles/beautify.css">
</head>


<body>
    <!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="#">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->
    <nav class="navigation">
        <div class="container">
            <div class="navigation__wrapper">
                <div class="navigation__logo">
                    <img src="./images/smashIt.png" alt="gad weather logo">
                </div>
                <ul class="navigation__menu--item">
                    <li class="navigation__menu--items"><a href="/">Home</a></li>
                    <li class="navigation__menu--items"><a href="/about.html">About</a></li>
                    <li class="navigation__menu--items"><a href="/contact.html">Contact</a></li>
                    <li class="navigation__menu--items"><a href="/weather.html">Weather</a></li>
                </ul>
                <div class="icon-container">
                    <input type="checkbox" id="navigation-toggle" class="navigation__checkbox" />
                    <label for="navigation-toggle" class="navigation__button">
                        <span class="navigation__icon"></span>
                    </label>
                </div>

            </div>

            <ul class="mobile__menu">
                <li class="navigation__menu--items"><a href="/">Home</a></li>
                <li class="navigation__menu--items"><a href="/about.html">About</a></li>
                <li class="navigation__menu--items"><a href="/contact.html">Contact</a></li>
                <li class="navigation__menu--items"><a href="/weather.html">Weather</a></li>
            </ul>
        </div>
    </nav>

    </header>
    <section class="weather-daily">
        <div class="container">
            <div class="weather-daily__box">
                <h1>Event Possible</h1>
                <div class="row">
                    <div class="city">
                        <h3 id="city-box" class="city-box">City</h3>
                        <div class="time-deg">
                            <div class="time">
                                <!-- <span id="hour"></span> : <span id="minute"></span> : <span
                                id="second"></span> -->
                                <div class="time-boxes">
                                    <div class="time-box" id="hour">
                                        00
                                    </div>
                                    <div class="time-box" id="minute">
                                        00
                                    </div>
                                    <div class="time-box" id="second">
                                        00

                                    </div>
                                    <span class="ap" id="ap">
                                        00
                                    </span>
                                </div>
                                <p id="date"></p>
                            </div>
                            <div class="deg" id="deg">00 <sup>0</sup>C</div>
                        </div>
                    </div>
                    <div class="condition">
                        <div class="icon"><img src="" alt="" id="icon"></div>
                        <h2 id="city-condition"></h2>
                        <div class="table" id="table">

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section class="map-section">
        <div class="container">
            <div class="weather__boxes" id="weather-box">
            </div>
        </div>
    </section>
    <div class="map" id='map'></div>
    <footer class="footer">
        <div class="container">
            <p>
                Copyright <span id="get-year"></span> | Coded by
                <a href="http://twitter.com/developer_tolu" style="color: #fff;" target="_blank"
                    class="coded-by">Folorunso Tolulope</a>
            </p>
        </div>
    </footer>
    <div class="alert" id="alert">
        <p id="alert-p">successfully added</p>
    </div>
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('service-worker.js')
                    .then(registration => {
                        console.log('Service Worker is registered', registration);
                    })
                    .catch(err => {
                        console.error('Registration failed:', err);
                    });
            });
        }
    </script>
    <script>
        const weatherBox = document.getElementById('weather-box');
        // const weatherB = document.querySelector('.weather-box');
        const imageArr = [
            './images/evening.jpg',
            './images/flowers.jpg',
            './images/storm.jpg',
            './images/thunder.jpg',
            './images/tree-1.jpg',
            './images/tree-2.jpg',
            './images/tree-3.jpg',
            './images/tree.jpg'
        ];
        const getWeatherFromStorage = () => {
            let data = JSON.parse(localStorage.getItem('smashit'));

            // if (!data) {
            // 	console.log('No data to fetch');
            // 	return 'No data to fetch';
            // }
            console.log(data.data);

            const {
                cityName,
                countryName,
                data: {
                    daily,
                    current: {
                        sunrise,
                        sunset,
                        temp,
                        weather: [{
                            main,
                            description,
                            icon
                        }]
                    },
                    lat,
                    lon
                }
            } = data;
            console.log(cityName);

            displayWeatherDaily(daily);
        };

        const displayWeatherDaily = props => {
            let htmlTemplate = '';
            props.forEach((prop, index) => {
                // weatherB.style.background =

                htmlTemplate += `
        <div class="weather__box" style="background-image:linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url(${
					imageArr[index]
				});">
            <h3>Day-${index + 1} <span>${new Date(
			prop.sunrise * 1000
		).toLocaleDateString('en-US', {
			month: 'short',
			day: 'numeric',
			weekday: 'short'
		})}</span></h3>
                <div class="weather__box--content">
                    <div class="weather__box-top">
                        <ul>
                            <li>Humidity- <span>${prop.humidity}%</span></li>
                            <li>Weather- <span>${
															prop.weather[0].main
														}</span></li>
                        </ul>
                    </div>
                    <div class="weather__box-bottom">
                        <ul>
                            <li>Temperature- <span>${Math.round(
															prop.temp.day
														)}<sup>0</sup>C</span></li>
                            <li>Wind_speed- <span>${Math.round(
															prop.wind_speed
														)}/s</span></li>
                        </ul>
                    </div>
                </div>
            </div>
        `;
            });

            weatherBox.innerHTML = htmlTemplate;
        };

        getWeatherFromStorage();
    </script>
    <script src="/scripts/life.js"></script>
</body>

</html>